generate the segmentation proposal step-by-step

main based on the key-segment code